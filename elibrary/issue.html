<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Issue / Return | PCTE E-Library</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="bg-canvas"></div>
<canvas id="particles-canvas"></canvas>

<!-- Sidebar -->
<nav class="sidebar">
  <div class="sidebar-logo">
    <svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
  </div>
  <div class="sidebar-divider"></div>
  <a href="index.html"     class="nav-item">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
    <span class="nav-tooltip">Home</span>
  </a>
  <a href="gallery.html"   class="nav-item">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
    <span class="nav-tooltip">Library</span>
  </a>
  <a href="dashboard.html" class="nav-item">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
    <span class="nav-tooltip">Dashboard</span>
  </a>
  <a href="issue.html"     class="nav-item active">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
    <span class="nav-tooltip">Issue/Return</span>
  </a>
  <div class="sidebar-divider"></div>
  <div class="theme-toggle-btn"></div>
</nav>

<div class="top-bar">
  <div class="top-pill"><span class="live-dot"></span> Issue / Return</div>
</div>

<div class="page-wrapper">
  <div class="main-content">
    <div style="padding-top:38px;padding-bottom:24px;">
      <p class="section-sub">Circulation Desk</p>
      <h1 class="section-title">Issue <span>&amp; Return</span></h1>
    </div>

    <div class="issue-layout">

      <!-- Left: Issue form -->
      <div>
        <div class="issue-panel reveal">
          <div class="issue-panel-title">Issue a Book</div>
          <div class="issue-panel-sub">Select a book and enter student details to issue</div>

          <div class="form-group">
            <label class="form-label" for="student-name">Student Name</label>
            <input class="form-control" type="text" id="student-name" placeholder="e.g. Arjun Sharma"/>
          </div>

          <div class="form-group">
            <label class="form-label" for="student-id">Student ID</label>
            <input class="form-control" type="text" id="student-id" placeholder="e.g. PCTE2024001"/>
          </div>

          <div class="form-group">
            <label class="form-label" for="book-select">Select Book</label>
            <select class="form-control" id="book-select">
              <option value="">— Choose a book —</option>
            </select>
          </div>

          <!-- Book preview -->
          <div class="book-preview" id="book-preview"></div>

          <div style="display:flex;gap:12px;margin-top:8px;">
            <button class="btn-gold" id="issue-btn" disabled style="flex:1;justify-content:center;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="15" height="15"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
              Issue Book
            </button>
            <button class="btn-outline" id="return-btn" disabled style="flex:1;justify-content:center;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" width="15" height="15"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
              Return Book
            </button>
          </div>
        </div>

        <!-- Transaction log table -->
        <div class="issue-panel reveal" style="margin-top:24px;" data-delay="100">
          <div class="issue-panel-title" style="margin-bottom:4px;">Transaction History</div>
          <div class="issue-panel-sub">Recent issue and return records</div>
          <div style="overflow-x:auto;">
            <table class="issue-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Student</th>
                  <th>Book</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Due</th>
                </tr>
              </thead>
              <tbody id="issue-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Right: Info panel -->
      <div>
        <div class="issue-panel reveal" data-delay="80">
          <div class="issue-panel-title" style="margin-bottom:16px;">Library Rules</div>
          <ul style="display:flex;flex-direction:column;gap:14px;list-style:none;">
            <li style="display:flex;gap:12px;align-items:flex-start;font-size:0.83rem;color:var(--text-muted);line-height:1.55;">
              <span style="color:var(--gold);flex-shrink:0;margin-top:1px;">✦</span>
              Maximum <strong style="color:var(--text-light);">3 books</strong> may be issued per student at a time.
            </li>
            <li style="display:flex;gap:12px;align-items:flex-start;font-size:0.83rem;color:var(--text-muted);line-height:1.55;">
              <span style="color:var(--gold);flex-shrink:0;margin-top:1px;">✦</span>
              Books must be returned within <strong style="color:var(--text-light);">14 days</strong> of issue date.
            </li>
            <li style="display:flex;gap:12px;align-items:flex-start;font-size:0.83rem;color:var(--text-muted);line-height:1.55;">
              <span style="color:var(--gold);flex-shrink:0;margin-top:1px;">✦</span>
              A fine of <strong style="color:var(--text-light);">₹5 per day</strong> will be charged for late returns.
            </li>
            <li style="display:flex;gap:12px;align-items:flex-start;font-size:0.83rem;color:var(--text-muted);line-height:1.55;">
              <span style="color:var(--gold);flex-shrink:0;margin-top:1px;">✦</span>
              Damaged or lost books must be replaced or paid for at current market price.
            </li>
          </ul>
        </div>

        <!-- Quick stats panel -->
        <div class="issue-panel reveal" style="margin-top:20px;" data-delay="160">
          <div class="issue-panel-title" style="margin-bottom:16px;">Quick Stats</div>
          <div style="display:flex;flex-direction:column;gap:16px;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <span style="font-size:0.82rem;color:var(--text-muted);">Total Books</span>
              <span style="font-family:var(--font-display);font-size:1.4rem;color:var(--cream);font-weight:600;" id="qs-total">—</span>
            </div>
            <div style="height:1px;background:var(--glass-border);"></div>
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <span style="font-size:0.82rem;color:var(--text-muted);">Available Now</span>
              <span style="font-family:var(--font-display);font-size:1.4rem;color:var(--success);font-weight:600;" id="qs-avail">—</span>
            </div>
            <div style="height:1px;background:var(--glass-border);"></div>
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <span style="font-size:0.82rem;color:var(--text-muted);">Currently Issued</span>
              <span style="font-family:var(--font-display);font-size:1.4rem;color:var(--danger);font-weight:600;" id="qs-issued">—</span>
            </div>
            <div style="height:1px;background:var(--glass-border);"></div>
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <span style="font-size:0.82rem;color:var(--text-muted);">Transactions Today</span>
              <span style="font-family:var(--font-display);font-size:1.4rem;color:var(--gold);font-weight:600;">5</span>
            </div>
          </div>
        </div>

        <div style="margin-top:16px;">
          <a href="gallery.html" class="btn-gold" style="width:100%;justify-content:center;">
            Browse Full Catalogue
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation overlay -->
<div class="confirm-overlay" id="confirm-overlay">
  <div class="confirm-box">
    <div class="confirm-icon success">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
    </div>
    <div class="confirm-title">Success!</div>
    <div class="confirm-msg" id="confirm-msg"></div>
    <div style="margin-top:24px;">
      <button class="btn-gold" style="width:100%;justify-content:center;" onclick="document.getElementById('confirm-overlay').classList.remove('show')">Done</button>
    </div>
  </div>
</div>

<footer>
  <div class="footer-brand">PCTE E-Library</div>
  <div class="footer-text">E-Library Management via Cloud in Local Schools &nbsp;·&nbsp; PCTE Group of Institutes</div>
  <div class="footer-credit">Designed by <span>Zaidd</span> &nbsp;·&nbsp; <span class="year"></span></div>
</footer>

<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    const qs = (id) => document.getElementById(id);
    if (qs('qs-total')) qs('qs-total').textContent = BOOKS.length;
    if (qs('qs-avail')) qs('qs-avail').textContent = BOOKS.filter(b=>b.available).length;
    if (qs('qs-issued')) qs('qs-issued').textContent = BOOKS.filter(b=>!b.available).length;

    // Update quick stats when books change
    const origShowConfirm = window.showConfirm;
    setInterval(() => {
      if (qs('qs-avail'))  qs('qs-avail').textContent  = BOOKS.filter(b=>b.available).length;
      if (qs('qs-issued')) qs('qs-issued').textContent = BOOKS.filter(b=>!b.available).length;
    }, 500);
  }, 300);
});
</script>
</body>
</html>
